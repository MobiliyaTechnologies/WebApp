
    <link rel="stylesheet" type="text/css" href="./app/css/map.css" />
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?branch=release&callback=loadMapScenario' async defer></script>
    <link href="./bower_components/kendo-ui/styles/kendo.common-material.min.css" rel="stylesheet" />
    <link href="./bower_components/kendo-ui/styles/kendo.material.min.css" rel="stylesheet" />
    <link href="./bower_components/kendo-ui/styles/kendo.material.mobile.min.css" rel="stylesheet" />
    <script>
        $(function () {
            //setIFrameSize();
            $(window).resize(function () {

                clearTimeout(resizeTimeout);
                var resizeTimeout = setTimeout(function () {
                    angular.element(document.getElementById('iFrameEmbedTile')).scope().setIFrameSize();
                }, 1000);
            });
        });
        function loadMapScenario() {
            console.log("loaded");

            angular.element(document.getElementById('myMap1')).scope().loadMapScenario();

        }
   // loadMapScenario();
    </script>
     <div style="color:white;">
       
         <!--<a ui-sref="reports" class="pull-right btn btn-primary btn-outline" style="color:white;">Reports</a>
         <a href="https://mseastus.blob.core.windows.net/general/PowerMap_Dec_27_2016.xlsx" style="color:white;float:right;margin-top:5px;margin-right:10px;">Download power map report</a>-->
         <h4 class="header-text">DASHBOARD<!--<small>Why is Ani Theme so awesome?</small>--></h4>



        <div class="">
            <div class="">
                <div class="ui-widget">
                    
                        <div class="row">
                            <div class="demo-section k-content" style="position: absolute;z-index:2;margin-left:10px;margin-top:15px;">
                                <input  class="col-sm-3" kendo-auto-complete k-on-select="meterSelection(kendoEvent)" ng-model="country" k-options="options" k-placeholder= "'Search Meter..'" class="k-textbox k-space-right" />
                                <!--<span class="k-icon k-i-search"></span>-->
                            </div> 
                             
                                <div class="dash-unit col-sm-12" style="height:60vh;padding:0;margin-top:15px;">
                                    <div id='myMap1'>
                                    </div>
                                </div>
                            
                        </div>
                    
                </div>
               </div>
        </div>
         <h4 class="header-text">INSIGHTS</h4>
             <div class="">
                 <div class="dash-unit">
                     <div class="ui-widget">

                         <div class="row">
                             <div class="col-sm-12" style="padding:0;">
                                 <div class="recommendation-bar">
                                     <div class="recommendation-bar-content">
                                         <div class="col-sm-4">
                                             <span class="glyphicon glyphicon-arrow-up arrow" aria-hidden="true"></span>
                                             <h2 style="">{{insight.ConsumptionValue}}K</h2>
                                             <label>CONSUMED IN LAST MONTH</label>
                                         </div>
                                         <div class="col-sm-4">
                                             <span class="glyphicon glyphicon-arrow-down arrow" aria-hidden="true"></span>
                                             <h2 style="">{{insight.overused}}K</h2>
                                             <label>OVERUSED</label>
                                         </div>
                                         <div class="col-sm-4">
                                             <span class="glyphicon glyphicon-arrow-up arrow" aria-hidden="true"></span>
                                             <h2 style="">{{insight.PredictedValue}}K</h2>
                                             <label>EXPECTED</label>
                                         </div>
                                     </div>
                                 </div>

                             </div>
                         </div>
                         <div ng-repeat="recommendation in recommendations | limitTo:2"class="row">
                             <div class="col-sm-12 recommendation-content">
                                 <div class="col-sm-8">
                                    <div  class="col-sm-12 recommendation-title">
                                       {{recommendation.Alert_Type}}
                                    </div>
                                     <div class=" col-sm-12 recommendation-text">
                                         {{recommendation.Alert_Desc}}
                                     </div>
                                 </div>
                                 <div class="col-sm-4">
                                     <label>{{recommendation.Timestamp | date}} </label>
                                 </div>
                             </div>
                         </div>
                         <div class="row">
                             <a class="recommendation-view-more" ui-sref="recommendation">VIEW MORE</a>
                         </div>
                     </div>

                 </div>
             </div>
</div>
         
         <h4 class="header-text">CLASS LAYOUT</h4>
         <div id="layout" class="jumbotron">
             <div class="container">
                 <div class="ui-widget">
                     <div class="row">
                         <div class="col-sm-9">
                             <img src="./app/images/map_04.png" alt="Mountain View" style="width:990px;height:600px;">
                             <div ng-repeat="sensor in sensors">
                                 <div ng-if=sensor.Class_Id id="sensor_layout_{{sensor.Sensor_Id}}" data-drag="true" class="sensor col-sm-3" style="position:absolute;display:block;top:{{sensor.Class_X+($index*20)+50}}px;left:{{sensor.Class_Y+($index*20)-110}}px;cursor:pointer;cursor:pointer;" ng-click="showSensorDetails(sensor)">
                                     <h5 class="blink_me" style="position:absolute;margin-left:6px;margin-top:5px;cursor:pointer;">{{sensor.Temperature.toFixed(0)}}</h5>
                                     <img src="./app/images/bullet_green.svg" alt="Mountain View" style="height:30px; width:30px;z-index:1;">
                                 </div>
                             </div>
                         </div>
                         <div class="col-sm-3" style="color:black;">
                             <div class="panel panel-default">
                                 <div class="panel-body">
                                     <div class="sensor-detail  col-sm-12">
                                         <h3>SENSOR DETAILS </h3></br>
                                         <h4>{{selectedSensor.Sensor_Name}}</h4>
                                         <Label>Humidity :&nbsp;&nbsp;</Label>{{selectedSensor.Humidity.toFixed(2)}}</br>
                                         <Label>Brightness :&nbsp;&nbsp;</Label>{{selectedSensor.Brightness}}</br>
                                         <Label>Temperature :&nbsp;&nbsp;</Label>{{selectedSensor.Temperature.toFixed(2)}}</br>
                                     </div>
                                 </div>
                             </div>


                         </div>
                     </div>

                 </div>
             </div>
         </div>




         <h4 class="header-text">MONTHLY CONSUMPTION REPORT</h4>
         <div class="jumbotron">
             <div class="container">
                 <div class="ui-widget">
                     <div class="row">
                         <div class="col-sm-12" >
                             <div class="k-content">
                                 <div ng-if="YearlyConsumption.loading" class="loader"></div>
                             </div>
                             <div class="highchart-wrapper">
                                 <highchart ng-if="YearlyConsumption" class="highchart-container"  config="YearlyConsumption"></highchart>
                             </div>                       
                        </div>
                         <span class="glyphicon glyphicon-circle-arrow-left gi-3x" ng-click="moveMonthBackward()"></span>
                         <span class="glyphicon glyphicon-circle-arrow-right pull-right gi-3x" ng-click="moveMonthForward()"></span>
                    </div>
                     
                 </div>
             </div>
         </div>

         <h4 class="header-text">WEEKLY CONSUMPTION REPORT</h4>
         <div class="jumbotron">
             <div class="container">
                 <div class="ui-widget">
                     <div class="row">
                         <div class="col-sm-12">
                             <div class="k-content">
                                 <div ng-if="WeeklyConsumption.loading" class="loader"></div>
                             </div>
                             <div class="highchart-wrapper">
                                <highchart ng-if="WeeklyConsumption" config="WeeklyConsumption" class="highchart-container"></highchart>
                              </div>
                           </div>
                         <span class="glyphicon glyphicon-circle-arrow-left gi-3x" ng-click="moveWeekBackward()"></span>
                         <span class="glyphicon glyphicon-circle-arrow-right pull-right gi-3x" ng-click="moveWeekForward()"></span>
                     </div>
                 </div>
             </div>
         </div>


         <h4 class="header-text">MONTHLY REPORTS</h4>
         <div class="jumbotron">
             <div class="container">
                 <div class="ui-widget">
                     <div class="row">
                         <div class="col-sm-12">
                             <div class="highchart-wrapper">
                                 <highchart ng-if="currentMonth" config="currentMonth" class="highchart-container" style="height:80vh;"></highchart>
                             </div>
                         </div>
                         <!--<div class="col-sm-6">
                             <hc-chart id="linechart" options="nextMonth">Placeholder for generic chart</hc-chart>
                         </div>-->
                     </div>
                 </div>
             </div>
         </div>
         <h4 class="header-text">PREDICTIONS REPORTS</h4>
         <div class="jumbotron">
             <div class="container">
                 <div class="ui-widget">
                     <div class="row">
                             <div class="highchart-wrapper col-sm-6">
                                 <highchart ng-if="currentMonthPrediction" config="currentMonthPrediction" class="highchart-container"></highchart>
                             </div>
                             <div class="highchart-wrapper col-sm-6">
                                     <highchart ng-if="nextMonthPrediction" config="nextMonthPrediction" class="highchart-container"></highchart>
                             </div>
                     </div>
                 </div>
             </div>
         </div>

        
         <h4  class="header-text">ALL REPORTS</h4>
         <div class="jumbotron" >
             <div class="container">
                 <div class="ui-widget">
                         <div class="row">
                             <div class="col-sm-12">

                                 <div class="col-sm-6 col-sm-6">
                                     <div class="dash-unit col-sm-11 col-sm-11" style="height:350px;">
                                         <iframe id="iFrameEmbedTile" src="" class="iframe-class-overview-page" src="" scrolling="no" frameborder="0" seamless></iframe>
                                         <div id="meterName" style="display:none;">
                                             <h3 style="overflow-wrap: normal;line-height: 16px;">Metername :  <small>{{selectedMeterName}}</small></h3>
                                             <h3 style="overflow-wrap: normal;line-height: 16px;">
                                                 Monthly Consumption :  <small>{{selectedMontlyConsumption}}</small></h3style="overflow-wrap:>
                                                 <h3 style="overflow-wrap: normal;line-height: 16px;">Cost :  <small>{{selectCost}}</small></h3>
                                         </div>
                                     </div>
                                 </div>
                                 <div class="col-sm-6 col-sm-6">
                                     <div class="dash-unit  col-sm-11 col-sm-11" style="height:350px;">
                                         <iframe id="weatherIFrame" src="" class="iframe-class-overview-page" frameborder="0" seamless></iframe>
                                     </div>
                                 </div>

                             </div>
                         </div>      
                 </div>
             </div>
         </div>
         <h4  class="header-text" >METER REPORT&nbsp;{{MeterName}}</h4>
         <div class="jumbotron" >
             <div class="container">
                 <div class="ui-widget">
                     <div id="example" ng-app="KendoDemos">
                         <div class="row">
                             <div id="report" class="dash-unit col-sm-12" style="height:100%;padding:0;">
                                 <iframe id="reportIframe" src="" class="iframe-class-report-page" frameborder="1" seamless></iframe>
                             </div>
                             
                         </div>
                     </div>
                 </div>
             </div>
         </div>

         
    </div>
    
    